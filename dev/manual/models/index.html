<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Microstructure Models · Microstructure.jl</title><meta name="title" content="Microstructure Models · Microstructure.jl"/><meta property="og:title" content="Microstructure Models · Microstructure.jl"/><meta property="twitter:title" content="Microstructure Models · Microstructure.jl"/><meta name="description" content="Documentation for Microstructure.jl."/><meta property="og:description" content="Documentation for Microstructure.jl."/><meta property="twitter:description" content="Documentation for Microstructure.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.png" alt="Microstructure.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.png" alt="Microstructure.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../getting_started/">Getting started</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../dMRI/">I/O functions</a></li><li><a class="tocitem" href="../compartments/">Tissue Compartments</a></li><li class="is-active"><a class="tocitem" href>Microstructure Models</a><ul class="internal"><li><a class="tocitem" href="#dMRI-models"><span>dMRI models</span></a></li><li><a class="tocitem" href="#Combined-diffusion-relaxometry-models"><span>Combined diffusion-relaxometry models</span></a></li><li><a class="tocitem" href="#Prediction-of-MRI-signals"><span>Prediction of MRI signals</span></a></li></ul></li><li><a class="tocitem" href="../estimators/">Estimators</a></li><li><a class="tocitem" href="../multithreads/">Multi threads</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/1_build_models/">How to build a microstructure model</a></li><li><a class="tocitem" href="../../tutorials/2_quality_of_fit/">How to check quality of fitting and mcmc samples</a></li><li><a class="tocitem" href="../../tutorials/3_data_generation/">How to generate training datasets</a></li><li><a class="tocitem" href="../../tutorials/4_noise_propagation/">How to evaluate accuracy and precision</a></li><li><a class="tocitem" href="../../tutorials/5_model_selection/">Which model to use</a></li></ul></li><li><a class="tocitem" href="../../guide/">Developer guide</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Microstructure Models</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Microstructure Models</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Tinggong/Microstructure.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Tinggong/Microstructure.jl/blob/main/docs/src/manual/models.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Microstructure-Models"><a class="docs-heading-anchor" href="#Microstructure-Models">Microstructure Models</a><a id="Microstructure-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Microstructure-Models" title="Permalink"></a></h1><p>This page introduces several biophysical models. A biophysical model includes several tissue compartments and other parameters including compartment fractions and signals.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Microstructure.BiophysicalModel" href="#Microstructure.BiophysicalModel"><code>Microstructure.BiophysicalModel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>All models in this page belong to the BiophysicalModel Type. You can also build your models with desired combinations of compartments using a similar syntax.  In each model, all compartmental parameters can be considered &quot;free parameters&quot; and sampled using MCMC.  This is designed to offer maximum flexibility in adjusting model assumptions, but it doesn&#39;t guarantee reliable estimation of all parameters.  It&#39;s common that we need to fix or link some tissue parameters based on our data measurement protocols and our tissue parameters of interest. Parameter fixing and linking can be achieved by settings in MCMC sampler in the estimator module.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tinggong/Microstructure.jl/blob/22146a29657ee3db38c78163297dd0a08ce8a2a8/src/models_smt.jl#L19-L25">source</a></section></article><h2 id="dMRI-models"><a class="docs-heading-anchor" href="#dMRI-models">dMRI models</a><a id="dMRI-models-1"></a><a class="docs-heading-anchor-permalink" href="#dMRI-models" title="Permalink"></a></h2><h3 id="WM-models"><a class="docs-heading-anchor" href="#WM-models">WM models</a><a id="WM-models-1"></a><a class="docs-heading-anchor-permalink" href="#WM-models" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Microstructure.ExCaliber" href="#Microstructure.ExCaliber"><code>Microstructure.ExCaliber</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ExCaliber(
    axon::Cylinder,
    extra::Zeppelin,
    dot::Iso,
    fracs::Vector{Float64}
    )</code></pre><p>ExCaliber is a multi-compartment model for estimating axon diameter. It can be used for ex vivo imaging when the diffusivity in the ISO compartment is set to 0 (dot compatment), and for in vivo imaging if the diffusivity of the ISO compartment is set to free water in tissue (CSF compartment).  </p><p><strong>Reference</strong></p><p>Fan, Q., Nummenmaa, A., Witzel, T., Ohringer, N., Tian, Q., Setsompop, K., ... &amp; Huang, S. Y. (2020). Axon diameter index estimation independent of fiber orientation distribution using high-gradient diffusion MRI. Neuroimage, 222, 117197.</p><p>Gong, T., Maffei, C., Dann, E., Lee, H.-H., Lee Hansol, Huang, S., Suzanne, H., Yendiki, A., 2024. Imaging the relationship of axon diameter and myelination in macaque and human brain, in: ISMRM.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tinggong/Microstructure.jl/blob/22146a29657ee3db38c78163297dd0a08ce8a2a8/src/models_smt.jl#L103-L118">source</a></section></article><h3 id="GM-models"><a class="docs-heading-anchor" href="#GM-models">GM models</a><a id="GM-models-1"></a><a class="docs-heading-anchor-permalink" href="#GM-models" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Microstructure.SANDI" href="#Microstructure.SANDI"><code>Microstructure.SANDI</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SANDI(
    soma::Sphere,
    neurite::Stick,
    extra::Iso,
    fracs::Vector{Float64}
    )</code></pre><p>The soma and neurite density imaging (SANDI) model uses a sphere compartment to model the cell soma,  a stick compartment to model the neurite and an isotropic diffusion compartment for the extra-cellular space;  It includes all the tissue parameters in each compartment and a <code>fracs</code> vector representing the fraction of  intra-soma signal and intra-neurite signal (the extra-cellular signal fraction is 1-sum(fracs)). For SANDI model, ignore the field of <code>t2</code> in all compartments and set them to 0.</p><p><strong>Reference</strong></p><p>Palombo, M., Ianus, A., Guerreri, M., Nunes, D., Alexander, D.C., Shemesh, N., Zhang, H., 2020. SANDI: A compartment-based model for non-invasive apparent soma and neurite imaging by diffusion MRI. Neuroimage 215. https://doi.org/10.1016/j.neuroimage.2020.116835</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tinggong/Microstructure.jl/blob/22146a29657ee3db38c78163297dd0a08ce8a2a8/src/models_smt.jl#L28-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Microstructure.SANDIdot" href="#Microstructure.SANDIdot"><code>Microstructure.SANDIdot</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SANDIdot(
    soma::Sphere 
    neurite::Stick
    extra::Iso 
    dot::Iso
    fracs::Vector{Float64} 
)</code></pre><p>SANDIdot model includes additionally a dot compartment for SANDI model; the dot compartment is considered as immobile water and is more commonly seen in ex vivo imaging. For SANDIdot model, ignore the field of t2 in all compartments and set them to 0. The fraction vector represents fractions of the soma,  neurite and dot with the fraction of extra being 1-sum(fracs).</p><p><strong>Reference</strong></p><p>Alexander, D.C., Hubbard, P.L., Hall, M.G., Moore, E.A., Ptito, M., Parker, G.J.M., Dyrby, T.B., 2010. Orientationally invariant indices of axon diameter and density from diffusion MRI. Neuroimage 52, 1374–1389. https://doi.org/10.1016/j.neuroimage.2010.05.043</p><p>Panagiotaki, E., Schneider, T., Siow, B., Hall, M.G., Lythgoe, M.F., Alexander, D.C., 2012. Compartment models of the diffusion MR signal in brain white matter: A taxonomy and comparison. Neuroimage 59, 2241–2254. </p><p>Palombo, M., Ianus, A., Guerreri, M., Nunes, D., Alexander, D.C., Shemesh, N., Zhang, H., 2020. SANDI: A compartment-based model for non-invasive apparent soma and neurite imaging by diffusion MRI. Neuroimage 215. https://doi.org/10.1016/j.neuroimage.2020.116835</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tinggong/Microstructure.jl/blob/22146a29657ee3db38c78163297dd0a08ce8a2a8/src/models_smt.jl#L75-L94">source</a></section></article><h2 id="Combined-diffusion-relaxometry-models"><a class="docs-heading-anchor" href="#Combined-diffusion-relaxometry-models">Combined diffusion-relaxometry models</a><a id="Combined-diffusion-relaxometry-models-1"></a><a class="docs-heading-anchor-permalink" href="#Combined-diffusion-relaxometry-models" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Microstructure.MTE_SMT" href="#Microstructure.MTE_SMT"><code>Microstructure.MTE_SMT</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MTE_SMT(
    axon::Stick = Stick()
    extra::Zeppelin = Zeppelin()
    fracs::Float64 = 0.5
    )</code></pre><p>This is a model using multi-TE spherical mean technique for lower b-value in vivo imaging. Compartmental T2s are considered.  There is not a specific reference for this model yet, but you can refer to previous work related to this topic:</p><p>Kaden, E., Kruggel, F., Alexander, D.C., 2016. Quantitative mapping of the per-axon diffusion coefficients in brain white matter. Magn Reson Med 75, 1752–1763. https://doi.org/10.1002/MRM.25734</p><p>Kaden, E., Kelm, N. D., Carson, R. P., Does, M. D., &amp; Alexander, D. C. (2016). Multi-compartment microscopic diffusion imaging. NeuroImage, 139, 346-359.</p><p>Veraart, J., Novikov, D.S., Fieremans, E., 2017. TE dependent Diffusion Imaging (TEdDI) distinguishes between compartmental T 2 relaxation times. https://doi.org/10.1016/j.neuroimage.2017.09.030</p><p>Gong, T., Tong, Q., He, H., Sun, Y., Zhong, J., Zhang, H., 2020. MTE-NODDI: Multi-TE NODDI for disentangling non-T2-weighted signal fractions from compartment-specific T2 relaxation times. Neuroimage 217. https://doi.org/10.1016/j.neuroimage.2020.116906</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tinggong/Microstructure.jl/blob/22146a29657ee3db38c78163297dd0a08ce8a2a8/src/models_smt.jl#L135-L152">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Microstructure.MTE_SANDI" href="#Microstructure.MTE_SANDI"><code>Microstructure.MTE_SANDI</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MTE_SANDI(
    soma::Sphere 
    neurite::Stick
    extra::Iso 
    fracs::Vector{Float64} 
    S0norm::Float64
    )</code></pre><p>For Multi-echo-SANDI (MTE-SANDI) model, consider the <code>t2</code> values in all compartments,  and the fractions estimated will be non-T2-weighted compartment fractions in comparison to the model mentioned above.  <code>S0norm</code> is the relaxation-weighting free signal from all compartments S(b=0,t=0) normalised by S(b=0,t=TEmin).</p><p><strong>Reference</strong></p><p>Gong, T., Tax, C.M., Mancini, M., Jones, D.K., Zhang, H., Palombo, M., 2023. Multi-TE SANDI: Quantifying compartmental T2 relaxation times in the grey matter. Toronto.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tinggong/Microstructure.jl/blob/22146a29657ee3db38c78163297dd0a08ce8a2a8/src/models_smt.jl#L52-L67">source</a></section></article><h2 id="Prediction-of-MRI-signals"><a class="docs-heading-anchor" href="#Prediction-of-MRI-signals">Prediction of MRI signals</a><a id="Prediction-of-MRI-signals-1"></a><a class="docs-heading-anchor-permalink" href="#Prediction-of-MRI-signals" title="Permalink"></a></h2><p>This function implements different methods for different BiophysicalModel types.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Microstructure.model_signals" href="#Microstructure.model_signals"><code>Microstructure.model_signals</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">model_signals(model::BiophysicalModel,prot::Protocol[,links])</code></pre><p>Reture predicted model signals from BiophysicalModel <code>model</code> and imaging protocol &#39;prot&#39;.     <code>links</code> is a optional argument that specify parameter links in the model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Tinggong/Microstructure.jl/blob/22146a29657ee3db38c78163297dd0a08ce8a2a8/src/models_smt.jl#L159-L164">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../compartments/">« Tissue Compartments</a><a class="docs-footer-nextpage" href="../estimators/">Estimators »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.6.0 on <span class="colophon-date" title="Friday 30 August 2024 12:23">Friday 30 August 2024</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
